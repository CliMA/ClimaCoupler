<html>
<head>
<style>
    #profiler-container-15098 {
        margin: 0;
        padding: 0;
        width: 100vw;
        height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
        overflow: hidden;
    }
    body {
        margin: 0;
        padding: 0;
    }
</style>
</head>
<body>
    <div id="profiler-container-15098"></div>
    <script type="module">
        const ProfileCanvas = await import('data:text/javascript;base64,LyogdGVtcG9yYXJpbHkgY29waWVkIGFuZCBtb2RpZmllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9wZml0enNlYi9qbC1wcm9maWxlLmpzL2Jsb2IvYTEzZjJlZjc4NTJiYzE3ODJlYzE4MGUzZWZkNGNjZWYyZGE3YmE2ZC9kaXN0L3Byb2ZpbGUtdmlld2VyLmpzICovCmV4cG9ydCBjbGFzcyBQcm9maWxlVmlld2VyIHsKICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGRhdGEsIHNlbGVjdG9yTGFiZWwpIHsKICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbXTsKICAgICAgICB0aGlzLm9mZnNldFggPSAwOwogICAgICAgIHRoaXMub2Zmc2V0WSA9IDA7CiAgICAgICAgdGhpcy5pc1doZWVsaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5jYW5XaGVlbERvd24gPSB0cnVlOwogICAgICAgIHRoaXMuc2Nyb2xsUG9zaXRpb24gPSAwOwogICAgICAgIHRoaXMuaXNSZXNpemluZyA9IGZhbHNlOwogICAgICAgIHRoaXMuaXNEb2N1bWVudFNjcm9sbGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMuaXNNb3VzZU1vdmUgPSBmYWxzZTsKICAgICAgICB0aGlzLnNjYWxlID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICAgICAgdGhpcy5ib3JkZXJXaWR0aCA9IDI7CiAgICAgICAgdGhpcy5wYWRkaW5nID0gMjsKICAgICAgICB0aGlzLmZvbnRDb25maWcgPSAnMTBweCBzYW5zLXNlcmlmJzsKICAgICAgICB0aGlzLmJvcmRlckNvbG9yID0gJyNmZmYnOwogICAgICAgIHRoaXMuc2VsZWN0b3JMYWJlbCA9ICdUaHJlYWQnOwogICAgICAgIHRoaXMuYm94SGVpZ2h0ID0gMjQ7CiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTsKICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgICBpZiAoIWVsZW1lbnQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHBhcmVudCBlbGVtZW50IHNwZWNpZmllZC4nKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5jb250YWluZXIgPSBlbGVtZW50OwogICAgICAgIGlmIChzZWxlY3RvckxhYmVsKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0b3JMYWJlbCA9IHNlbGVjdG9yTGFiZWw7CiAgICAgICAgfQogICAgICAgIHRoaXMuaW5zZXJ0RE9NKCk7CiAgICAgICAgdGhpcy5nZXRTdHlsZXMoKTsKICAgICAgICB0aGlzLnJlZ2lzdGVyUmVzaXplT2JzZXJ2ZXIoKTsKICAgICAgICB0aGlzLnJlZ2lzdGVyU2Nyb2xsTGlzdGVuZXIoKTsKICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgICB0aGlzLnNldERhdGEoZGF0YSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZ2V0T2Zmc2V0KCk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgYW5kIGFkZGVkIGNoaWxkIGVsZW1lbnRzLiBUaGUgZ2xvYmFsIHN0eWxlc2hlZXQKICAgICAqIGlzIG9ubHkgcmVtb3ZlZCBpZiB0aGlzIGlzIHRoZSBsYXN0IHJlZmVyZW5jZSB0byBpdCAoaS5lLiB0aGVyZSBhcmUgbm8KICAgICAqIG90aGVyIG5vdC1kZXN0cm95ZWQgUHJvZmlsZVZpZXdlciBpbnN0YW5jZXMgaW4gdGhlIERPTSkuCiAgICAgKi8KICAgIGRlc3Ryb3koKSB7CiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlOwogICAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgICAgIGlmICh0aGlzLnNjcm9sbEhhbmRsZXIpIHsKICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuc3R5bGVzaGVldCAmJiBwYXJzZUludCh0aGlzLnN0eWxlc2hlZXQuZGF0YXNldC5yZWZlcmVuY2VzKSA9PT0gMCkgewogICAgICAgICAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKHRoaXMuc3R5bGVzaGVldCk7CiAgICAgICAgfQogICAgICAgIHdoaWxlICh0aGlzLmNvbnRhaW5lci5maXJzdENoaWxkKSB7CiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuY29udGFpbmVyLmxhc3RDaGlsZCk7CiAgICAgICAgfQogICAgfQogICAgc2V0RGF0YShkYXRhKSB7CiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoaXMgcHJvZmlsZSB2aWV3ZXIgaXMgZGVzdHJveWVkLicpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgICAgICAgICB0aGlzLmNsZWFyKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc3Qgc2VsZWN0aW9ucyA9IE9iamVjdC5rZXlzKGRhdGEpOwogICAgICAgIHNlbGVjdGlvbnMuc29ydCgoYSwgYikgPT4gewogICAgICAgICAgICBpZiAoYSA9PT0gJ2FsbCcpIHsKICAgICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYiA9PT0gJ2FsbCcpIHsKICAgICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChhIDwgYikgewogICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChhID4gYikgewogICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTsKICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBzZWxlY3Rpb25zOwogICAgICAgIHRoaXMuY3VycmVudFNlbGVjdGlvbiA9IHRoaXMuc2VsZWN0aW9uc1swXTsKICAgICAgICB0aGlzLmFjdGl2ZU5vZGUgPSB0aGlzLmRhdGFbdGhpcy5jdXJyZW50U2VsZWN0aW9uXTsKICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlcigpOwogICAgICAgIHRoaXMucmVkcmF3KCk7CiAgICB9CiAgICBzZXRTZWxlY3RvckxhYmVsKGxhYmVsKSB7CiAgICAgICAgdGhpcy5zZWxlY3RvckxhYmVsID0gbGFiZWw7CiAgICAgICAgdGhpcy5zZWxlY3RvckxhYmVsRWxlbWVudC5pbm5lclRleHQgPSBgJHtsYWJlbH06IGA7CiAgICB9CiAgICByZWdpc3RlckN0cmxDbGlja0hhbmRsZXIoZikgewogICAgICAgIHRoaXMuY3RybENsaWNrSGFuZGxlciA9IGY7CiAgICB9CiAgICAvKioKICAgICAqIEBkZXByZWNhdGVkIFVzZSBgcmVnaXN0ZXJTZWxlY3Rpb25IYW5kbGVyYCBpbnN0ZWFkLgogICAgICovCiAgICByZWdpc3RlclRocmVhZFNlbGVjdG9ySGFuZGxlcihmKSB7CiAgICAgICAgdGhpcy5zZWxlY3Rpb25IYW5kbGVyID0gZjsKICAgIH0KICAgIHJlZ2lzdGVyU2VsZWN0aW9uSGFuZGxlcihmKSB7CiAgICAgICAgdGhpcy5zZWxlY3Rpb25IYW5kbGVyID0gZjsKICAgIH0KICAgIHJlZ2lzdGVyU2Nyb2xsTGlzdGVuZXIoKSB7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTsKICAgIH0KICAgIGNsZWFyKCkgewogICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdOwogICAgICAgIHRoaXMuY3VycmVudFNlbGVjdGlvbiA9ICcnOwogICAgICAgIHRoaXMuYWN0aXZlTm9kZSA9IHVuZGVmaW5lZDsKICAgICAgICB0aGlzLmNhbnZhc0N0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXNXaWR0aCwgdGhpcy5jYW52YXNIZWlnaHQpOwogICAgICAgIHRoaXMuaG92ZXJDYW52YXNDdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzV2lkdGgsIHRoaXMuY2FudmFzSGVpZ2h0KTsKICAgIH0KICAgIGlzRGVzdHJveWVkKCkgewogICAgICAgIHJldHVybiB0aGlzLmRlc3Ryb3llZDsKICAgIH0KICAgIGdldFN0eWxlcygpIHsKICAgICAgICB2YXIgX2EsIF9iLCBfYzsKICAgICAgICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuY29udGFpbmVyLCBudWxsKTsKICAgICAgICBjb25zdCBmb250RmFtaWx5ID0gc3R5bGUuZm9udEZhbWlseTsKICAgICAgICBjb25zdCBmb250U2l6ZSA9IHN0eWxlLmZvbnRTaXplOwogICAgICAgIHRoaXMuZm9udENvbmZpZyA9CiAgICAgICAgICAgIHBhcnNlSW50KGZvbnRTaXplICE9PSBudWxsICYmIGZvbnRTaXplICE9PSB2b2lkIDAgPyBmb250U2l6ZSA6ICcxMnB4JywgMTApICogdGhpcy5zY2FsZSArCiAgICAgICAgICAgICAgICAncHggJyArCiAgICAgICAgICAgICAgICAoZm9udEZhbWlseSAhPT0gbnVsbCAmJiBmb250RmFtaWx5ICE9PSB2b2lkIDAgPyBmb250RmFtaWx5IDogJ3NhbnMtc2VyaWYnKTsKICAgICAgICB0aGlzLmJvcmRlckNvbG9yID0gKF9hID0gc3R5bGUuY29sb3IpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcjMDAwJzsKICAgICAgICB0aGlzLmNhbnZhc0N0eC5mb250ID0gdGhpcy5mb250Q29uZmlnOwogICAgICAgIHRoaXMuY2FudmFzQ3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnOwogICAgICAgIGNvbnN0IHRleHRNZXRyaWNzID0gdGhpcy5jYW52YXNDdHgubWVhc3VyZVRleHQoJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xcXSpcJyJeX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicpOwogICAgICAgIHRoaXMuYm94SGVpZ2h0ID0gTWF0aC5jZWlsKCgoKF9iID0gdGV4dE1ldHJpY3MuZm9udEJvdW5kaW5nQm94RGVzY2VudCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdGV4dE1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50KSArCiAgICAgICAgICAgICgoX2MgPSB0ZXh0TWV0cmljcy5mb250Qm91bmRpbmdCb3hBc2NlbnQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHRleHRNZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94QXNjZW50KSArCiAgICAgICAgICAgIDIgKiB0aGlzLmJvcmRlcldpZHRoICsKICAgICAgICAgICAgMiAqIHRoaXMucGFkZGluZykgKgogICAgICAgICAgICB0aGlzLnNjYWxlKTsKICAgICAgICBpZiAodGhpcy5hY3RpdmVOb2RlKSB7CiAgICAgICAgICAgIHRoaXMucmVkcmF3KCk7CiAgICAgICAgfQogICAgfQogICAgcmVkcmF3KCkgewogICAgICAgIHRoaXMuY2FuV2hlZWxEb3duID0gZmFsc2U7CiAgICAgICAgdGhpcy5jYW52YXNDdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzV2lkdGgsIHRoaXMuY2FudmFzSGVpZ2h0KTsKICAgICAgICB0aGlzLmNsZWFySG92ZXIoKTsKICAgICAgICB0aGlzLmRyYXdHcmFwaCh0aGlzLmFjdGl2ZU5vZGUsIHRoaXMuY2FudmFzV2lkdGgsIHRoaXMuY2FudmFzSGVpZ2h0LCAwLCB0aGlzLnNjcm9sbFBvc2l0aW9uKTsKICAgIH0KICAgIGluc2VydERPTSgpIHsKICAgICAgICB0aGlzLmluc2VydFN0eWxlc2hlZXQoKTsKICAgICAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICAgIHRoaXMuY2FudmFzLmNsYXNzTGlzdC5hZGQoJ19fcHJvZmlsZXItY2FudmFzJyk7CiAgICAgICAgdGhpcy5jYW52YXNDdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgIHRoaXMuaG92ZXJDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgICB0aGlzLmhvdmVyQ2FudmFzLmNsYXNzTGlzdC5hZGQoJ19fcHJvZmlsZXItaG92ZXItY2FudmFzJyk7CiAgICAgICAgdGhpcy5ob3ZlckNhbnZhc0N0eCA9IHRoaXMuaG92ZXJDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICBjb25zdCBjYW52YXNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBjYW52YXNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnX19wcm9maWxlci1jYW52YXMtY29udGFpbmVyJyk7CiAgICAgICAgY2FudmFzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKTsKICAgICAgICBjYW52YXNDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5ob3ZlckNhbnZhcyk7CiAgICAgICAgY2FudmFzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlVG9vbHRpcCgpKTsKICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUZpbHRlckNvbnRhaW5lcigpKTsKICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXNDb250YWluZXIpOwogICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgKGV2KSA9PiB7CiAgICAgICAgICAgIGlmICghdGhpcy5hY3RpdmVOb2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGV2LmRlbHRhWSA+IDAgJiYgIXRoaXMuY2FuV2hlZWxEb3duKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGV2LmRlbHRhWSA8IDAgJiYgdGhpcy5zY3JvbGxQb3NpdGlvbiA9PT0gMCkgewogICAgICAgICAgICAgICAgaWYgKC1ldi5kZWx0YVkgPiB0aGlzLmJveEhlaWdodCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZmluZFBhcmVudE5vZGUodGhpcy5hY3RpdmVOb2RlKTsKICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFySG92ZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVOb2RlID0gcGFyZW50OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZHJhdygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGlmICghdGhpcy5pc1doZWVsaW5nKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFBvc2l0aW9uID0gTWF0aC5taW4oMCwgdGhpcy5zY3JvbGxQb3NpdGlvbiAtIGV2LmRlbHRhWSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWRyYXcoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlzV2hlZWxpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5pc1doZWVsaW5nID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChldikgPT4gewogICAgICAgICAgICBpZiAoIXRoaXMuaXNNb3VzZU1vdmUgJiYgdGhpcy5hY3RpdmVOb2RlKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAvLyBYWFg6IHRoaXMgaXMgYmFkCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPZmZzZXQoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtb3VzZVggPSBldi5jbGllbnRYIC0gdGhpcy5vZmZzZXRYOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vdXNlWSA9IGV2LmNsaWVudFkgLSB0aGlzLm9mZnNldFk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob3ZlckNhbnZhc0N0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXNXaWR0aCwgdGhpcy5jYW52YXNIZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpZERyYXcgPSB0aGlzLmRyYXdIb3Zlcih0aGlzLmFjdGl2ZU5vZGUsIHRoaXMuc2NhbGUgKiBtb3VzZVgsIHRoaXMuc2NhbGUgKiBtb3VzZVkpOwogICAgICAgICAgICAgICAgICAgIGlmIChkaWREcmF3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb3VzZVggPiB0aGlzLmNhbnZhc1dpZHRoQ1NTIC8gMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sdGlwRWxlbWVudC5zdHlsZS5yaWdodCA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXNXaWR0aENTUyAtIG1vdXNlWCArIDEwICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZW1lbnQuc3R5bGUubGVmdCA9ICd1bnNldCc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBFbGVtZW50LnN0eWxlLnJpZ2h0ID0gJ3Vuc2V0JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZW1lbnQuc3R5bGUubGVmdCA9IG1vdXNlWCArIDEwICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobW91c2VZID4gdGhpcy5jYW52YXNIZWlnaHRDU1MgLyAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBFbGVtZW50LnN0eWxlLmJvdHRvbSA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXNIZWlnaHRDU1MgLSBtb3VzZVkgKyAxMCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBFbGVtZW50LnN0eWxlLnRvcCA9ICd1bnNldCc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBFbGVtZW50LnN0eWxlLmJvdHRvbSA9ICd1bnNldCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBFbGVtZW50LnN0eWxlLnRvcCA9IG1vdXNlWSArIDEwICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sdGlwRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTW91c2VNb3ZlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuaXNNb3VzZU1vdmUgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXYpID0+IHsKICAgICAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZU5vZGUpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgdGhpcy5nZXRPZmZzZXQoKTsKICAgICAgICAgICAgY29uc3QgbW91c2VYID0gdGhpcy5zY2FsZSAqIChldi5jbGllbnRYIC0gdGhpcy5vZmZzZXRYKTsKICAgICAgICAgICAgY29uc3QgbW91c2VZID0gdGhpcy5zY2FsZSAqIChldi5jbGllbnRZIC0gdGhpcy5vZmZzZXRZKTsKICAgICAgICAgICAgaWYgKGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkgewogICAgICAgICAgICAgICAgdGhpcy5ydW5Pbk5vZGVBdE1vdXNlUG9zaXRpb24odGhpcy5hY3RpdmVOb2RlLCBtb3VzZVgsIG1vdXNlWSwgKG5vZGUpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdHJsQ2xpY2tIYW5kbGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3RybENsaWNrSGFuZGxlcihub2RlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnpvb21Jbk9uTm9kZSh0aGlzLmFjdGl2ZU5vZGUsIG1vdXNlWCwgbW91c2VZKSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsUG9zaXRpb24gPSAwOwogICAgICAgICAgICAgICAgICAgIHRoaXMucmVkcmF3KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChldi5kZXRhaWwgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBvbiBkb3VibGUtY2xpY2sKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0VmlldygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CiAgICByZXNldFZpZXcoKSB7CiAgICAgICAgdGhpcy5hY3RpdmVOb2RlID0gdGhpcy5kYXRhW3RoaXMuY3VycmVudFNlbGVjdGlvbl07CiAgICAgICAgdGhpcy5zY3JvbGxQb3NpdGlvbiA9IDA7CiAgICAgICAgdGhpcy5yZWRyYXcoKTsKICAgIH0KICAgIGluc2VydFN0eWxlc2hlZXQoKSB7CiAgICAgICAgY29uc3Qgc3R5bGVzaGVldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNfX3Byb2ZpbGVyX3N0eWxlc2hlZXQnKTsKICAgICAgICBpZiAoc3R5bGVzaGVldCkgewogICAgICAgICAgICBzdHlsZXNoZWV0LmRhdGFzZXQucmVmZXJlbmNlcyA9IChwYXJzZUludChzdHlsZXNoZWV0LmRhdGFzZXQucmVmZXJlbmNlcykgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgICB0aGlzLnN0eWxlc2hlZXQgPSBzdHlsZXNoZWV0OwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zdHlsZXNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgICAgICAgICAgdGhpcy5zdHlsZXNoZWV0LnNldEF0dHJpYnV0ZSgnaWQnLCAnX19wcm9maWxlci1zdHlsZXNoZWV0Jyk7CiAgICAgICAgICAgIHRoaXMuc3R5bGVzaGVldC5kYXRhc2V0LnJlZmVyZW5jZXMgPSAnMCc7CiAgICAgICAgICAgIHRoaXMuc3R5bGVzaGVldC5pbm5lclRleHQgPSBgCiAgICAgICAgICAgICAgICAuX19wcm9maWxlci1jYW52YXMgewogICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDA7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLl9fcHJvZmlsZXItY2FudmFzLWNvbnRhaW5lciB7CiAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5fX3Byb2ZpbGVyLWhvdmVyLWNhbnZhcyB7CiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogMTsKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuX19wcm9maWxlci10b29sdGlwIHsKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiAyOwogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkZGQ7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7CiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiA0NSU7CiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5fX3Byb2ZpbGVyLXRvb2x0aXAgPiBkaXYgewogICAgICAgICAgICAgICAgICAgIGxpbmUtYnJlYWs6IGFueXdoZXJlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLl9fcHJvZmlsZXItZmlsdGVyIHsKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwcHg7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMnB4IDE2cHg7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM0NDQ7CiAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuX19wcm9maWxlci1yZXNldCB7CiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IHJpZ2h0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBgOwogICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRoaXMuc3R5bGVzaGVldCk7CiAgICAgICAgfQogICAgfQogICAgY3JlYXRlVG9vbHRpcCgpIHsKICAgICAgICB0aGlzLnRvb2x0aXBFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgdGhpcy50b29sdGlwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdfX3Byb2ZpbGVyLXRvb2x0aXAnKTsKICAgICAgICB0aGlzLnRvb2x0aXAgPSB7CiAgICAgICAgICAgIGNvdW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyksCiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSwKICAgICAgICAgICAgZnVuY3Rpb246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvZGUnKSwKICAgICAgICAgICAgZmlsZTogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLAogICAgICAgICAgICBmbGFnczogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpLAogICAgICAgIH07CiAgICAgICAgdGhpcy50b29sdGlwLmZ1bmN0aW9uLmNsYXNzTGlzdC5hZGQoJ2ZuYW1lJyk7CiAgICAgICAgY29uc3Qgcm93cyA9IFsKICAgICAgICAgICAgW3RoaXMudG9vbHRpcC5mdW5jdGlvbl0sCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcC5jb3VudCwKICAgICAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgKCcpLAogICAgICAgICAgICAgICAgdGhpcy50b29sdGlwLnBlcmNlbnRhZ2UsCiAgICAgICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnKSAnKSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgW3RoaXMudG9vbHRpcC5maWxlXSwKICAgICAgICAgICAgW3RoaXMudG9vbHRpcC5mbGFnc10sCiAgICAgICAgXTsKICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7CiAgICAgICAgICAgIGNvbnN0IHJvd0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBmb3IgKGNvbnN0IGNvbCBvZiByb3cpIHsKICAgICAgICAgICAgICAgIHJvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChjb2wpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZW1lbnQuYXBwZW5kQ2hpbGQocm93Q29udGFpbmVyKTsKICAgICAgICB9CiAgICAgICAgdGhpcy50b29sdGlwWydjdHJsQ2xpY2tIaW50J10gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzbWFsbCcpOwogICAgICAgIHRoaXMudG9vbHRpcEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy50b29sdGlwWydjdHJsQ2xpY2tIaW50J10pOwogICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMudG9vbHRpcEVsZW1lbnQpOwogICAgICAgIHJldHVybiB0aGlzLnRvb2x0aXBFbGVtZW50OwogICAgfQogICAgY3JlYXRlRmlsdGVyQ29udGFpbmVyKCkgewogICAgICAgIHRoaXMuZmlsdGVyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgdGhpcy5maWx0ZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnX19wcm9maWxlci1maWx0ZXInKTsKICAgICAgICB0aGlzLnNlbGVjdG9yTGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTsKICAgICAgICB0aGlzLnNlbGVjdG9yTGFiZWxFbGVtZW50LmlubmVyVGV4dCA9IGAke3RoaXMuc2VsZWN0b3JMYWJlbH06IGA7CiAgICAgICAgdGhpcy5maWx0ZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5zZWxlY3RvckxhYmVsRWxlbWVudCk7CiAgICAgICAgdGhpcy5maWx0ZXJJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpOwogICAgICAgIHRoaXMuZmlsdGVySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb24gPSB0aGlzLmZpbHRlcklucHV0LnZhbHVlOwogICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25IYW5kbGVyKSB7CiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkhhbmRsZXIodGhpcy5jdXJyZW50U2VsZWN0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnJlc2V0VmlldygpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuZmlsdGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZmlsdGVySW5wdXQpOwogICAgICAgIGNvbnN0IHJlc2V0dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgcmVzZXR0ZXIuY2xhc3NMaXN0LmFkZCgnX19wcm9maWxlci1yZXNldCcpOwogICAgICAgIHJlc2V0dGVyLmlubmVyVGV4dCA9ICdyZXNldCB2aWV3JzsKICAgICAgICByZXNldHRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgdGhpcy5yZXNldFZpZXcoKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmZpbHRlckNvbnRhaW5lci5hcHBlbmRDaGlsZChyZXNldHRlcik7CiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyQ29udGFpbmVyOwogICAgfQogICAgdXBkYXRlRmlsdGVyKCkgewogICAgICAgIHdoaWxlICh0aGlzLmZpbHRlcklucHV0LmZpcnN0Q2hpbGQpIHsKICAgICAgICAgICAgdGhpcy5maWx0ZXJJbnB1dC5yZW1vdmVDaGlsZCh0aGlzLmZpbHRlcklucHV0Lmxhc3RDaGlsZCk7CiAgICAgICAgfQogICAgICAgIGZvciAoY29uc3Qgc2VsZWN0aW9uIG9mIHRoaXMuc2VsZWN0aW9ucykgewogICAgICAgICAgICBjb25zdCBlbnRyeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgICAgICAgICBlbnRyeS5pbm5lclRleHQgPSBzZWxlY3Rpb247CiAgICAgICAgICAgIGVudHJ5LnNldEF0dHJpYnV0ZSgndmFsdWUnLCBzZWxlY3Rpb24pOwogICAgICAgICAgICB0aGlzLmZpbHRlcklucHV0LmFwcGVuZENoaWxkKGVudHJ5KTsKICAgICAgICB9CiAgICB9CiAgICByZWdpc3RlclJlc2l6ZU9ic2VydmVyKCkgewogICAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHsKICAgICAgICAgICAgaWYgKCF0aGlzLmlzUmVzaXppbmcpIHsKICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykgewogICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS50YXJnZXQgPT09IHRoaXMuY29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICE9PSB0aGlzLnNjYWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2FsZSA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3R5bGVzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc1dpZHRoID0gTWF0aC5yb3VuZChlbnRyeS5jb250ZW50UmVjdC53aWR0aCAqIHRoaXMuc2NhbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXNIZWlnaHQgPSBNYXRoLnJvdW5kKChlbnRyeS5jb250ZW50UmVjdC5oZWlnaHQgLSAzMCkgKiB0aGlzLnNjYWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzV2lkdGhDU1MgPSBlbnRyeS5jb250ZW50UmVjdC53aWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzSGVpZ2h0Q1NTID0gZW50cnkuY29udGVudFJlY3QuaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLmNhbnZhc1dpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5jYW52YXNIZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhvdmVyQ2FudmFzLndpZHRoID0gdGhpcy5jYW52YXNXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaG92ZXJDYW52YXMuaGVpZ2h0ID0gdGhpcy5jYW52YXNIZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZHJhdygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Jlc2l6aW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuaXNSZXNpemluZyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5jb250YWluZXIpOwogICAgfQogICAgc2Nyb2xsSGFuZGxlcihlKSB7CiAgICAgICAgaWYgKCF0aGlzLmlzRG9jdW1lbnRTY3JvbGxpbmcpIHsKICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmdldE9mZnNldCgpOwogICAgICAgICAgICAgICAgdGhpcy5pc0RvY3VtZW50U2Nyb2xsaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmlzRG9jdW1lbnRTY3JvbGxpbmcgPSB0cnVlOwogICAgICAgIH0KICAgIH0KICAgIGdldE9mZnNldCgpIHsKICAgICAgICBjb25zdCBib3ggPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICB0aGlzLm9mZnNldFggPSBib3gubGVmdDsKICAgICAgICB0aGlzLm9mZnNldFkgPSBib3gudG9wOwogICAgfQogICAgLy8gaGFzaCBvZiBmdW5jdGlvbiBuYW1lZCwgdXNlZCB0byBzZWVkIFBSTkcKICAgIG5vZGVIYXNoKG5vZGUpIHsKICAgICAgICBjb25zdCBoYXNoU3RyaW5nID0gbm9kZS5maWxlICsgbm9kZS5saW5lOwogICAgICAgIGxldCBoYXNoID0gMDsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhhc2hTdHJpbmcubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgY2hhciA9IGhhc2hTdHJpbmcuY2hhckNvZGVBdChpKTsKICAgICAgICAgICAgaGFzaCA9IChoYXNoIDw8IDUpIC0gaGFzaCArIGNoYXI7CiAgICAgICAgICAgIGhhc2ggPSBoYXNoICYgaGFzaDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGhhc2g7CiAgICB9CiAgICAvLyBTaW1wbGUgUFJORyBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NzU5MzMxNi8xMjExMzE3OAogICAgbXVsYmVycnkzMihhKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IHQgPSAoYSArPSAweDZkMmI3OWY1KTsKICAgICAgICAgICAgdCA9IE1hdGguaW11bCh0IF4gKHQgPj4+IDE1KSwgdCB8IDEpOwogICAgICAgICAgICB0IF49IHQgKyBNYXRoLmltdWwodCBeICh0ID4+PiA3KSwgdCB8IDYxKTsKICAgICAgICAgICAgcmV0dXJuICgodCBeICh0ID4+PiAxNCkpID4+PiAwKSAvIDQyOTQ5NjcyOTY7CiAgICAgICAgfTsKICAgIH0KICAgIC8vIG1vZGlmaWVzIHRoZSBub3JtYWwgY29sb3IgYnkgdGhyZWUgc3RhYmxlIHJhbmRvbSB2YWx1ZXMgZHJhd24gZnJvbSBhCiAgICAvLyBQUk5HIHNlZWRlZCBieSB0aGUgbm9kZSBoYXNoCiAgICBtb2RpZnlOb2RlQ29sb3JCeUhhc2gociwgZywgYiwgaGFzaCwgcmFuZ2UgPSA3MCkgewogICAgICAgIGNvbnN0IHJuZyA9IHRoaXMubXVsYmVycnkzMihoYXNoKTsKICAgICAgICBpZiAociA9PT0gZyAmJiBnID09PSBiKSB7CiAgICAgICAgICAgIHIgPSBnID0gYiA9IE1hdGgubWluKDI1NSwgTWF0aC5tYXgoMCwgciArIChybmcoKSAtIDAuNSkgKiByYW5nZSkpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgciA9IE1hdGgubWluKDI1NSwgTWF0aC5tYXgoMCwgciArIChybmcoKSAtIDAuNSkgKiByYW5nZSkpOwogICAgICAgICAgICBnID0gTWF0aC5taW4oMjU1LCBNYXRoLm1heCgwLCBnICsgKHJuZygpIC0gMC41KSAqIHJhbmdlKSk7CiAgICAgICAgICAgIGIgPSBNYXRoLm1pbigyNTUsIE1hdGgubWF4KDAsIGIgKyAocm5nKCkgLSAwLjUpICogcmFuZ2UpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgciwKICAgICAgICAgICAgZywKICAgICAgICAgICAgYiwKICAgICAgICB9OwogICAgfQogICAgbW9kaWZ5Tm9kZUNvbG9yQnlDb3VudChyLCBnLCBiLCBjb3VudCwgcmFuZ2UgPSAyNTUpIHsKICAgICAgICAgICAgciA9IE1hdGgubWluKDI1NSwgZyAqICgxLWNvdW50KSApOwogICAgICAgICAgICBnID0gTWF0aC5taW4oMjU1LCBnICogKDEtY291bnQpICk7CiAgICAgICAgICAgIGIgPSBNYXRoLm1pbigyNTUsIGIgKiAoMS1jb3VudCkgKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICByLAogICAgICAgICAgICBnLAogICAgICAgICAgICBiLAogICAgICAgIH07CiAgICB9CiAgICBub2RlQ29sb3JzKG5vZGUsIGhhc2gpIHsKICAgICAgICBsZXQgciwgZywgYjsKICAgICAgICBsZXQgYSA9IDE7CiAgICAgICAgLyoqCiAgICAgICAgaWYgKG5vZGUuZmxhZ3MgJiAweDAxKSB7CiAgICAgICAgICAgIC8vIHJ1bnRpbWUtZGlzcGF0Y2gKICAgICAgICAgICAgOwogICAgICAgICAgICAoeyByLCBnLCBiIH0gPSB0aGlzLm1vZGlmeU5vZGVDb2xvckJ5SGFzaCgyMDQsIDEwMywgMTAzLCBoYXNoLCAyMCkpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChub2RlLmZsYWdzICYgMHgwMikgewogICAgICAgICAgICAvLyBnYwogICAgICAgICAgICA7CiAgICAgICAgICAgICh7IHIsIGcsIGIgfSA9IHRoaXMubW9kaWZ5Tm9kZUNvbG9yQnlIYXNoKDIwNCwgMTUzLCA2OCwgaGFzaCwgMjApKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobm9kZS5mbGFncyAmIDB4MDgpIHsKICAgICAgICAgICAgLy8gY29tcGlsYXRpb24/CiAgICAgICAgICAgIDsKICAgICAgICAgICAgKHsgciwgZywgYiB9ID0gdGhpcy5tb2RpZnlOb2RlQ29sb3JCeUhhc2goMTAwLCAxMDAsIDEwMCwgaGFzaCwgNjApKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIC8vIGRlZmF1bHQKICAgICAgICAgICAgOwogICAgICAgICAgICAoeyByLCBnLCBiIH0gPSB0aGlzLm1vZGlmeU5vZGVDb2xvckJ5SGFzaCg2NCwgOTksIDIyMSwgaGFzaCkpOwogICAgICAgIH0KICAgICAgICBpZiAobm9kZS5mbGFncyAmIDB4MTApIHsKICAgICAgICAgICAgLy8gQyBmcmFtZQogICAgICAgICAgICBhID0gMC41OwogICAgICAgIH0KICAgICAgICAqLwoKICAgICAgICAvLyBpZiAobm9kZS5jb3VudCA+IDApIHsKICAgICAgICAvLyBiZXR0ZXIgcGVyZm9ybWFuY2UKICAgICAgICA7CiAgICAgICAgaWYgKG5vZGUuY291bnRfY2hhbmdlIC8gbm9kZS5jb3VudCA+IDEwMCkgewogICAgICAgICAgICAoeyByLCBnLCBiIH0gPSB0aGlzLm1vZGlmeU5vZGVDb2xvckJ5Q291bnQoMCwgMCwgMCwgbm9kZS5jb3VudF9jaGFuZ2UgLyBub2RlLmNvdW50ICkpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChub2RlLmNvdW50X2NoYW5nZS8gbm9kZS5jb3VudCA+IDApIHsKICAgICAgICAgICAgKHsgciwgZywgYiB9ID0gdGhpcy5tb2RpZnlOb2RlQ29sb3JCeUNvdW50KDI1NSwgMjU1LCAyNTUsIG5vZGUuY291bnRfY2hhbmdlIC8gbm9kZS5jb3VudCApKTsKICAgICAgICAgICAgciA9IDI1NSAtIDIwOwogICAgICAgICAgICBnID0gZyAtIDIwOwogICAgICAgICAgICBiID0gYiAtIDIwOwoKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICh7IHIsIGcsIGIgfSA9IHRoaXMubW9kaWZ5Tm9kZUNvbG9yQnlDb3VudCgyNTUsIDI1NSwgMjU1LCAtIG5vZGUuY291bnRfY2hhbmdlIC8gbm9kZS5jb3VudCApKTsKICAgICAgICAgICAgYiA9IDI1NSAtIDIwOwogICAgICAgICAgICBnID0gZyAtIDIwOwogICAgICAgICAgICByID0gciAtIDIwOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZmlsbDogJ3JnYmEoJyArIHIgKyAnLCcgKyBnICsgJywnICsgYiArICcsJyArIGEgKyAnKScsCiAgICAgICAgICAgIHN0cm9rZTogJ3JnYmEoJyArIDAuOCAqIHIgKyAnLCcgKyAwLjggKiBnICsgJywnICsgMC44ICogYiArICcsJyArIGEgKyAnKScsCiAgICAgICAgICAgIHRleHQ6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsICcgKyBNYXRoLm1heCgwLjYsIGEpICsgJyknLAogICAgICAgIH07CiAgICB9CiAgICBkcmF3R3JhcGgobm9kZSwgd2lkdGgsIGhlaWdodCwgeCwgeSkgewogICAgICAgIGlmICghbm9kZSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuY2FudmFzQ3R4LmZvbnQgPSB0aGlzLmZvbnRDb25maWc7CiAgICAgICAgdGhpcy5jYW52YXNDdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7CiAgICAgICAgaWYgKHkgKyB0aGlzLmJveEhlaWdodCA+PSAwKSB7CiAgICAgICAgICAgIGNvbnN0IGhhc2ggPSB0aGlzLm5vZGVIYXNoKG5vZGUpOwogICAgICAgICAgICBjb25zdCB7IGZpbGwsIHN0cm9rZSwgdGV4dCB9ID0gdGhpcy5ub2RlQ29sb3JzKG5vZGUsIGhhc2gpOwogICAgICAgICAgICB0aGlzLmRyYXdOb2RlKG5vZGUuZnVuYywgZmlsbCwgc3Ryb2tlLCB0ZXh0LCB3aWR0aCwgeCwgeSk7CiAgICAgICAgfQogICAgICAgIG5vZGUucG9zID0gewogICAgICAgICAgICB4LAogICAgICAgICAgICB5LAogICAgICAgICAgICB3aWR0aCwKICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmJveEhlaWdodCwKICAgICAgICB9OwogICAgICAgIGlmICh5ICsgdGhpcy5ib3hIZWlnaHQgPD0gdGhpcy5jYW52YXNIZWlnaHQpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgICBjb25zdCB3ID0gd2lkdGggKiAoY2hpbGQuZnJhY3Rpb24gfHwgY2hpbGQuY291bnQgLyBub2RlLmNvdW50KTsKICAgICAgICAgICAgICAgIHRoaXMuZHJhd0dyYXBoKGNoaWxkLCB3LCBoZWlnaHQsIHgsIHkgKyB0aGlzLmJveEhlaWdodCk7CiAgICAgICAgICAgICAgICB4ICs9IHc7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRoaXMuY2FuV2hlZWxEb3duID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICBkcmF3Tm9kZSh0ZXh0LCBjb2xvciwgYkNvbG9yLCB0ZXh0Q29sb3IsIHdpZHRoLCB4LCB5KSB7CiAgICAgICAgaWYgKHdpZHRoIDwgMSkgewogICAgICAgICAgICB3aWR0aCA9IDE7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGRyYXdCb3JkZXIgPSBmYWxzZTsgLy93aWR0aCA+IDIwKnRoaXMuYm9yZGVyV2lkdGg7CiAgICAgICAgdGhpcy5jYW52YXNDdHguZmlsbFN0eWxlID0gY29sb3I7CiAgICAgICAgdGhpcy5jYW52YXNDdHguYmVnaW5QYXRoKCk7CiAgICAgICAgdGhpcy5jYW52YXNDdHgucmVjdCh4LCB5ICsgdGhpcy5ib3JkZXJXaWR0aCwgd2lkdGgsIHRoaXMuYm94SGVpZ2h0IC0gdGhpcy5ib3JkZXJXaWR0aCk7CiAgICAgICAgdGhpcy5jYW52YXNDdHguY2xvc2VQYXRoKCk7CiAgICAgICAgdGhpcy5jYW52YXNDdHguZmlsbCgpOwogICAgICAgIGlmIChkcmF3Qm9yZGVyKSB7CiAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmZpbGxTdHlsZSA9IGJDb2xvcjsKICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LnJlY3QoeCwgeSArIHRoaXMuYm9yZGVyV2lkdGgsIHRoaXMuYm9yZGVyV2lkdGgsIHRoaXMuYm94SGVpZ2h0IC0gdGhpcy5ib3JkZXJXaWR0aCk7CiAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmNsb3NlUGF0aCgpOwogICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5maWxsKCk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHRleHRXaWR0aCA9IHdpZHRoIC0gMiAqIHRoaXMucGFkZGluZyAtIDIgKiB0aGlzLmJvcmRlcldpZHRoOwogICAgICAgIGlmICh0ZXh0V2lkdGggPiAxMCkgewogICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5zYXZlKCk7CiAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5yZWN0KHggKyB0aGlzLmJvcmRlcldpZHRoICsgdGhpcy5wYWRkaW5nLCB5ICsgdGhpcy5ib3JkZXJXaWR0aCArIHRoaXMucGFkZGluZywgdGV4dFdpZHRoLCB0aGlzLmJveEhlaWdodCAtIHRoaXMuYm9yZGVyV2lkdGggLSAyICogdGhpcy5wYWRkaW5nKTsKICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguY2xvc2VQYXRoKCk7CiAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmNsaXAoKTsKICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguZmlsbFN0eWxlID0gdGV4dENvbG9yOwogICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5maWxsVGV4dCh0ZXh0LCB4ICsgdGhpcy5ib3JkZXJXaWR0aCArIHRoaXMucGFkZGluZywgeSArIHRoaXMuYm94SGVpZ2h0IC8gMiArIHRoaXMuYm9yZGVyV2lkdGgpOwogICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5yZXN0b3JlKCk7CiAgICAgICAgfQogICAgfQogICAgdXBkYXRlVG9vbHRpcChub2RlKSB7CiAgICAgICAgdGhpcy50b29sdGlwLmZ1bmN0aW9uLmlubmVyVGV4dCA9IG5vZGUuZnVuYzsKICAgICAgICBpZiAobm9kZS5maWxlIHx8IG5vZGUubGluZSA+IDApIHsKICAgICAgICAgICAgdGhpcy50b29sdGlwLmZpbGUuaW5uZXJUZXh0ID0gbm9kZS5maWxlICsgJzonICsgbm9kZS5saW5lOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy50b29sdGlwLmZpbGUuaW5uZXJUZXh0ID0gJyc7CiAgICAgICAgfQogICAgICAgIHRoaXMudG9vbHRpcC5jb3VudC5pbm5lclRleHQgPSAobm9kZS5jb3VudExhYmVsIHx8IChub2RlLmNvdW50ICsgJyBzYW1wbGVzJykpLnRvU3RyaW5nKCk7CiAgICAgICAgbGV0IHBlcmNlbnRhZ2VUZXh0ID0gKCgxMDAgKiBub2RlLmNvdW50KSAvCiAgICAgICAgICAgIHRoaXMuZGF0YVt0aGlzLmN1cnJlbnRTZWxlY3Rpb25dLmNvdW50KS50b0ZpeGVkKCkgKyAnJSBvZiByb290JzsKICAgICAgICBpZiAodGhpcy5hY3RpdmVOb2RlLmNvdW50ICE9IHRoaXMuZGF0YVt0aGlzLmN1cnJlbnRTZWxlY3Rpb25dLmNvdW50KSB7CiAgICAgICAgICAgIHBlcmNlbnRhZ2VUZXh0ID0gcGVyY2VudGFnZVRleHQgKyAnLCAnICsgKCgxMDAgKiBub2RlLmNvdW50KSAvCiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZU5vZGUuY291bnQpLnRvRml4ZWQoKSArICclIG9mIHNlbGVjdGlvbic7CiAgICAgICAgfQogICAgICAgIHRoaXMudG9vbHRpcC5wZXJjZW50YWdlLmlubmVyVGV4dCA9IHBlcmNlbnRhZ2VUZXh0OwogICAgICAgIGNvbnN0IGZsYWdzID0gW107CiAgICAgICAgaWYgKG5vZGUuZmxhZ3MgJiAweDAxKSB7CiAgICAgICAgICAgIGZsYWdzLnB1c2goJ3J1bnRpbWUtZGlzcGF0Y2gnKTsKICAgICAgICB9CiAgICAgICAgaWYgKG5vZGUuZmxhZ3MgJiAweDAyKSB7CiAgICAgICAgICAgIGZsYWdzLnB1c2goJ0dDJyk7CiAgICAgICAgfQogICAgICAgIGlmIChub2RlLmZsYWdzICYgMHgwOCkgewogICAgICAgICAgICBmbGFncy5wdXNoKCdjb21waWxhdGlvbicpOwogICAgICAgIH0KICAgICAgICBpZiAobm9kZS5mbGFncyAmIDB4MTApIHsKICAgICAgICAgICAgZmxhZ3MucHVzaCgndGFzaycpOwogICAgICAgIH0KICAgICAgICBsZXQgZmxhZ1N0cmluZyA9ICcnOwogICAgICAgIGlmIChmbGFncy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGZsYWdTdHJpbmcgPSAnRmxhZ3M6ICcgKyBmbGFncy5qb2luKCcsICcpOwogICAgICAgIH0KICAgICAgICB0aGlzLnRvb2x0aXAuZmxhZ3MuaW5uZXJUZXh0ID0gZmxhZ1N0cmluZzsKICAgICAgICBpZiAodGhpcy5jdHJsQ2xpY2tIYW5kbGVyKSB7CiAgICAgICAgICAgIHRoaXMudG9vbHRpcFsnY3RybENsaWNrSGludCddLmlubmVyVGV4dCA9CiAgICAgICAgICAgICAgICAnQ3RybC9DbWQrQ2xpY2sgdG8gb3BlbiB0aGlzIGZpbGUnOwogICAgICAgIH0KICAgIH0KICAgIGRyYXdIb3Zlck5vZGUobm9kZSkgewogICAgICAgIHRoaXMuaG92ZXJDYW52YXNDdHguZmlsbFN0eWxlID0gdGhpcy5ib3JkZXJDb2xvcjsKICAgICAgICB0aGlzLmhvdmVyQ2FudmFzQ3R4LmZpbGxSZWN0KG5vZGUucG9zLngsIG5vZGUucG9zLnkgKyB0aGlzLmJvcmRlcldpZHRoLCBNYXRoLm1heCgxLCBub2RlLnBvcy53aWR0aCksIG5vZGUucG9zLmhlaWdodCAtIHRoaXMuYm9yZGVyV2lkdGgpOwogICAgICAgIGNvbnN0IGlubmVyV2lkdGggPSBub2RlLnBvcy53aWR0aCAtIHRoaXMuYm9yZGVyV2lkdGggKiAyICogdGhpcy5zY2FsZTsKICAgICAgICBpZiAoaW5uZXJXaWR0aCA+IDEpIHsKICAgICAgICAgICAgdGhpcy5ob3ZlckNhbnZhc0N0eC5jbGVhclJlY3Qobm9kZS5wb3MueCArIHRoaXMuYm9yZGVyV2lkdGggKiB0aGlzLnNjYWxlLCBub2RlLnBvcy55ICsgMiAqIHRoaXMuYm9yZGVyV2lkdGggKiB0aGlzLnNjYWxlLCBpbm5lcldpZHRoLCBub2RlLnBvcy5oZWlnaHQgLSB0aGlzLmJvcmRlcldpZHRoICogMyAqIHRoaXMuc2NhbGUpOwogICAgICAgIH0KICAgICAgICB0aGlzLnVwZGF0ZVRvb2x0aXAobm9kZSk7CiAgICB9CiAgICBjbGVhckhvdmVyKCkgewogICAgICAgIHRoaXMuaG92ZXJDYW52YXNDdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzV2lkdGgsIHRoaXMuY2FudmFzSGVpZ2h0KTsKICAgICAgICB0aGlzLnRvb2x0aXBFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICB9CiAgICBkcmF3SG92ZXIobm9kZSwgbW91c2VYLCBtb3VzZVkpIHsKICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICB0aGlzLnJ1bk9uTm9kZUF0TW91c2VQb3NpdGlvbihub2RlLCBtb3VzZVgsIG1vdXNlWSwgKG5vZGUpID0+IHsKICAgICAgICAgICAgdGhpcy5kcmF3SG92ZXJOb2RlKG5vZGUpOwogICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZvdW5kOwogICAgfQogICAgcnVuT25Ob2RlQXRNb3VzZVBvc2l0aW9uKHJvb3QsIHgsIHksIGYpIHsKICAgICAgICBpZiAoeCA+PSBNYXRoLmZsb29yKHJvb3QucG9zLngpICYmCiAgICAgICAgICAgIHggPD0gTWF0aC5jZWlsKHJvb3QucG9zLnggKyByb290LnBvcy53aWR0aCkgJiYKICAgICAgICAgICAgeSA+PSByb290LnBvcy55KSB7CiAgICAgICAgICAgIGlmICh5IDw9IHJvb3QucG9zLnkgKyByb290LnBvcy5oZWlnaHQpIHsKICAgICAgICAgICAgICAgIGYocm9vdCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2Ygcm9vdC5jaGlsZHJlbikgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJ1bk9uTm9kZUF0TW91c2VQb3NpdGlvbihjaGlsZCwgeCwgeSwgZikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHpvb21Jbk9uTm9kZShub2RlLCBtb3VzZVgsIG1vdXNlWSkgewogICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICAgIHRoaXMucnVuT25Ob2RlQXRNb3VzZVBvc2l0aW9uKG5vZGUsIG1vdXNlWCwgbW91c2VZLCAobm9kZSkgPT4gewogICAgICAgICAgICB0aGlzLmNsZWFySG92ZXIoKTsKICAgICAgICAgICAgdGhpcy5hY3RpdmVOb2RlID0gbm9kZTsKICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBmb3VuZDsKICAgIH0KICAgIC8vIGlkZWFsbHkgdGhpcyB3b3VsZG4ndCByZXF1aXJlIHRyZWUgdHJhdmVyc2FsIGF0IGFsbAogICAgZmluZFBhcmVudE5vZGUodGFyZ2V0LCBjdXJyZW50ID0gbnVsbCkgewogICAgICAgIGlmIChjdXJyZW50ID09PSBudWxsKSB7CiAgICAgICAgICAgIGN1cnJlbnQgPSB0aGlzLmRhdGFbdGhpcy5jdXJyZW50U2VsZWN0aW9uXTsKICAgICAgICB9CiAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBjdXJyZW50LmNoaWxkcmVuKSB7CiAgICAgICAgICAgIGlmIChjaGlsZCA9PT0gdGFyZ2V0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gdGhpcy5maW5kUGFyZW50Tm9kZSh0YXJnZXQsIGNoaWxkKTsKICAgICAgICAgICAgICAgIGlmIChmb3VuZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KfQovLyMgc291cmNlTWFwcGluZ1VSTD1wcm9maWxlLXZpZXdlci5qcy5tYXA=')
        const viewer = new ProfileCanvas.ProfileViewer("#profiler-container-15098", {"1":{"func":"root","file":"","path":"","line":0,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"_start","file":"client.jl","path":"./client.jl","line":522,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"exec_options","file":"client.jl","path":"./client.jl","line":318,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"run_main_repl","file":"client.jl","path":"./client.jl","line":404,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"invokelatest","file":"essentials.jl","path":"./essentials.jl","line":726,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"#invokelatest#2","file":"essentials.jl","path":"./essentials.jl","line":729,"count":3,"countLabel":null,"flags":1,"taskId":null,"children":[{"func":"#967","file":"client.jl","path":"./client.jl","line":419,"count":3,"countLabel":null,"flags":1,"taskId":null,"children":[{"func":"run_repl","file":"REPL.jl","path":"/Users/julia/.julia/scratchspaces/a66863c6-20e8-4ff4-8a62-49f30b1f605e/agent-cache/default-macmini-x64-6.0/build/default-macmini-x64-6-0/julialang/julia-release-1-dot-8/usr/share/julia/stdlib/v1.8/REPL/src/REPL.jl","line":355,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"#run_repl#47","file":"REPL.jl","path":"/Users/julia/.julia/scratchspaces/a66863c6-20e8-4ff4-8a62-49f30b1f605e/agent-cache/default-macmini-x64-6.0/build/default-macmini-x64-6-0/julialang/julia-release-1-dot-8/usr/share/julia/stdlib/v1.8/REPL/src/REPL.jl","line":369,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"start_repl_backend","file":"REPL.jl","path":"/Users/julia/.julia/scratchspaces/a66863c6-20e8-4ff4-8a62-49f30b1f605e/agent-cache/default-macmini-x64-6.0/build/default-macmini-x64-6-0/julialang/julia-release-1-dot-8/usr/share/julia/stdlib/v1.8/REPL/src/REPL.jl","line":232,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"repl_backend_loop","file":"REPL.jl","path":"/Users/julia/.julia/scratchspaces/a66863c6-20e8-4ff4-8a62-49f30b1f605e/agent-cache/default-macmini-x64-6.0/build/default-macmini-x64-6-0/julialang/julia-release-1-dot-8/usr/share/julia/stdlib/v1.8/REPL/src/REPL.jl","line":247,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"eval_user_input","file":"REPL.jl","path":"/Users/julia/.julia/scratchspaces/a66863c6-20e8-4ff4-8a62-49f30b1f605e/agent-cache/default-macmini-x64-6.0/build/default-macmini-x64-6-0/julialang/julia-release-1-dot-8/usr/share/julia/stdlib/v1.8/REPL/src/REPL.jl","line":151,"count":3,"countLabel":null,"flags":4,"taskId":null,"children":[{"func":"eval","file":"boot.jl","path":"./boot.jl","line":368,"count":3,"countLabel":null,"flags":1,"taskId":null,"children":[{"func":"include","file":"client.jl","path":"./client.jl","line":476,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"_include","file":"loading.jl","path":"./loading.jl","line":1488,"count":3,"countLabel":null,"flags":1,"taskId":null,"children":[{"func":"include_string","file":"loading.jl","path":"./loading.jl","line":1428,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"eval","file":"boot.jl","path":"./boot.jl","line":368,"count":3,"countLabel":null,"flags":1,"taskId":null,"children":[{"func":"step_coupler!","file":"flame_test.jl","path":"/Users/lenkanovak/ClimaCoupler.jl/perf/flame_test.jl","line":24,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"step_coupler!","file":"flame_test.jl","path":"/Users/lenkanovak/ClimaCoupler.jl/perf/flame_test.jl","line":25,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"get_y","file":"flame_test.jl","path":"/Users/lenkanovak/ClimaCoupler.jl/perf/flame_test.jl","line":20,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"cumsum","file":"accumulate.jl","path":"./accumulate.jl","line":144,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"cumsum##kw","file":"accumulate.jl","path":"./accumulate.jl","line":111,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"#cumsum#832","file":"accumulate.jl","path":"./accumulate.jl","line":113,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"cumsum!##kw","file":"accumulate.jl","path":"./accumulate.jl","line":49,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"#cumsum!#831","file":"accumulate.jl","path":"./accumulate.jl","line":51,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"_cumsum!","file":"accumulate.jl","path":"./accumulate.jl","line":61,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"accumulate!","file":"accumulate.jl","path":"./accumulate.jl","line":337,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"#accumulate!#839","file":"accumulate.jl","path":"./accumulate.jl","line":340,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"_accumulate!","file":"accumulate.jl","path":"./accumulate.jl","line":355,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"_accumulate1!","file":"accumulate.jl","path":"./accumulate.jl","line":432,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"setindex!","file":"array.jl","path":"./array.jl","line":966,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":999.0},"all":{"func":"root","file":"","path":"","line":0,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"_start","file":"client.jl","path":"./client.jl","line":522,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"exec_options","file":"client.jl","path":"./client.jl","line":318,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"run_main_repl","file":"client.jl","path":"./client.jl","line":404,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"invokelatest","file":"essentials.jl","path":"./essentials.jl","line":726,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"#invokelatest#2","file":"essentials.jl","path":"./essentials.jl","line":729,"count":3,"countLabel":null,"flags":1,"taskId":null,"children":[{"func":"#967","file":"client.jl","path":"./client.jl","line":419,"count":3,"countLabel":null,"flags":1,"taskId":null,"children":[{"func":"run_repl","file":"REPL.jl","path":"/Users/julia/.julia/scratchspaces/a66863c6-20e8-4ff4-8a62-49f30b1f605e/agent-cache/default-macmini-x64-6.0/build/default-macmini-x64-6-0/julialang/julia-release-1-dot-8/usr/share/julia/stdlib/v1.8/REPL/src/REPL.jl","line":355,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"#run_repl#47","file":"REPL.jl","path":"/Users/julia/.julia/scratchspaces/a66863c6-20e8-4ff4-8a62-49f30b1f605e/agent-cache/default-macmini-x64-6.0/build/default-macmini-x64-6-0/julialang/julia-release-1-dot-8/usr/share/julia/stdlib/v1.8/REPL/src/REPL.jl","line":369,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"start_repl_backend","file":"REPL.jl","path":"/Users/julia/.julia/scratchspaces/a66863c6-20e8-4ff4-8a62-49f30b1f605e/agent-cache/default-macmini-x64-6.0/build/default-macmini-x64-6-0/julialang/julia-release-1-dot-8/usr/share/julia/stdlib/v1.8/REPL/src/REPL.jl","line":232,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"repl_backend_loop","file":"REPL.jl","path":"/Users/julia/.julia/scratchspaces/a66863c6-20e8-4ff4-8a62-49f30b1f605e/agent-cache/default-macmini-x64-6.0/build/default-macmini-x64-6-0/julialang/julia-release-1-dot-8/usr/share/julia/stdlib/v1.8/REPL/src/REPL.jl","line":247,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"eval_user_input","file":"REPL.jl","path":"/Users/julia/.julia/scratchspaces/a66863c6-20e8-4ff4-8a62-49f30b1f605e/agent-cache/default-macmini-x64-6.0/build/default-macmini-x64-6-0/julialang/julia-release-1-dot-8/usr/share/julia/stdlib/v1.8/REPL/src/REPL.jl","line":151,"count":3,"countLabel":null,"flags":4,"taskId":null,"children":[{"func":"eval","file":"boot.jl","path":"./boot.jl","line":368,"count":3,"countLabel":null,"flags":1,"taskId":null,"children":[{"func":"include","file":"client.jl","path":"./client.jl","line":476,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"_include","file":"loading.jl","path":"./loading.jl","line":1488,"count":3,"countLabel":null,"flags":1,"taskId":null,"children":[{"func":"include_string","file":"loading.jl","path":"./loading.jl","line":1428,"count":3,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"eval","file":"boot.jl","path":"./boot.jl","line":368,"count":3,"countLabel":null,"flags":1,"taskId":null,"children":[{"func":"step_coupler!","file":"flame_test.jl","path":"/Users/lenkanovak/ClimaCoupler.jl/perf/flame_test.jl","line":24,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"step_coupler!","file":"flame_test.jl","path":"/Users/lenkanovak/ClimaCoupler.jl/perf/flame_test.jl","line":25,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"get_y","file":"flame_test.jl","path":"/Users/lenkanovak/ClimaCoupler.jl/perf/flame_test.jl","line":20,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"cumsum","file":"accumulate.jl","path":"./accumulate.jl","line":144,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"cumsum##kw","file":"accumulate.jl","path":"./accumulate.jl","line":111,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"#cumsum#832","file":"accumulate.jl","path":"./accumulate.jl","line":113,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"cumsum!##kw","file":"accumulate.jl","path":"./accumulate.jl","line":49,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"#cumsum!#831","file":"accumulate.jl","path":"./accumulate.jl","line":51,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"_cumsum!","file":"accumulate.jl","path":"./accumulate.jl","line":61,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"accumulate!","file":"accumulate.jl","path":"./accumulate.jl","line":337,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"#accumulate!#839","file":"accumulate.jl","path":"./accumulate.jl","line":340,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"_accumulate!","file":"accumulate.jl","path":"./accumulate.jl","line":355,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"_accumulate1!","file":"accumulate.jl","path":"./accumulate.jl","line":432,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[{"func":"setindex!","file":"array.jl","path":"./array.jl","line":966,"count":1,"countLabel":null,"flags":0,"taskId":null,"children":[],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-998.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":-996.0}],"count_change":999.0}}, "Thread")
    </script>
</body>
</html>

